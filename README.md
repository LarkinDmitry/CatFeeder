# CatFeeder
Данный проект позволит вам собрать автоматическую кормушку для ваших домашних животных.
[![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/preview.jpg)](https://www.youtube.com/watch?v=flGAjXiUZWA)

## Особенности этой кормушки:
* Для работы кормушки необходим обычный блок питания 5V. Ток не менее 2A (лучше 3A);
* Кормушку можно запитать от обычного павербанка;
* В кормушке применен модуль часов реального времени, это позволяет не переживать за возможные перебои с электричеством;
* В режиме ожидания кормушка показывает текущее время;
* Программа позволяет настраивать до 7 сеансов кормления в сутки (без перепрошивки контроллера);
* Вы сможете настроить время и количество корма для каждого сеанса;
* Настройки сохраняются в энергонезависимой памяти;
* При отсутствии электричества в момент очередного сеанса кормления, этот сеанс пропускается. При восстановлении электричества кормушка продолжит свою работу;
* Детали оптимизированы под печать PETG пластиком на FMD принтере с областью печати 200х200х200мм;
* Предусмотрено крепление кормушки на стену.

## Порядок сборки:
* Рекомендую с начала полностью прочитать статью и только после этого приступать к сборке.

### Электронная часть
* Подготовьте следующий список необходимых компонентов:
  - Повышающий DC-DC модуль XL6009;
  - модуль часов реального времени DS3231;
  - Arduino nano;
  - Шаговый двигатель 17HS4401 (или аналог. Высота корпуса двигателя не должна превышать 42мм, иначе он не залезет в корпус)
  - драйвер шагового двигателя A4988 (использование тихих драйверов типа TMC пойдет во вред, т.к. дополнительные вибрации во время работы двигателя помогают подаче корма);
  - I2C OLED 0.96" дисплей 128x64;
  - Модуль поворотного энкодера HW-040 (KY-040);
  - Макетная плата 5x7cm;
  - Электролитический конденсатор 16В 100uF;
  - Гнездо type-c;
  - Соединительные провода.
* Залейте на Arduino nano прошивку из папки [Arduino/catFeeder](https://github.com/LarkinDmitry/CatFeeder/tree/main/Arduino/catFeeder);
* Распаяйте контакты на arduino nano так как показано на фото ниже;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/1.jpg)
* Настройте выходное напряжение на модуле XL6009 равное 12В;
* Распаяйте все компоненты на макетной плате  так как показано на фото ниже;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/2.jpg)
* Соедините все контакты компонентов дорожками в соответствии с картинкой ниже. Установите модуль часов реального времени DS3231 и драйвер шагового двигателя A4988; 
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/3.jpg)
* Подключите питание к контактам IN+/IN- модуля XL6009 и настройте ток на драйвере шагового двигателя равным 0,5А (Vref = 0.4В). Большой крутящий момент в данном проекте не требуется, алгоритм вращения фидерного колеса позволяет справляться с закусыванием корма при подаче. !!! Внимание !!! не используйте в качестве источника питания USB порт компьютера, он не сможет выдать необходимый ток;
* Подключите дисплей, энкодер и шаговый двигатель;
* Проверьте работоспособность собранной платы.

### Механическая часть
* Распечатайте все детали из папки [3DModels/STL](https://github.com/LarkinDmitry/CatFeeder/tree/main/3DModels/STL). Если необходимо внести изменения, в папке [3DModels](https://github.com/LarkinDmitry/CatFeeder/tree/main/3DModels) есть исходные файлы для SOLIDWORKS 2018;
* Соедините детали корпуса как показано на фото 1 и 2 ниже. Если необходимо увеличить объем бака с кормом, вы можете еще раз распечатать деталь "L.013.00.00.04 Tank" и установить ее (фото 3).
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/4.jpg)
* Скрепите детали крышки, используя 2 кусочка филамента длинной 17,5мм и диаметром 1,75мм;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/5.jpg)
* Установите крышку на корпус;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/6.jpg)
* Возьмите 4 винта M3x10 и закрепите ими шаговый двигатель 17HS4401. Установите фидерное колесо на шток двигателя. Колесо должно плотно сидеть на валу исключая прокручивание;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/7.jpg)
* Установите гнездо type-c в нижнюю часть корпуса и припаяйте провода к контактам IN+/IN- модуля XL6009;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/8.jpg)
* С помощью термоклея закрепите на верхней части корпуса, дисплей и энкодер. Рекомендую предварительно припаять соединительные провода к контактам;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/9.jpg)
* Подключите шаговый двигатель, энкодер и дисплей к плате управления. Установите плату управления в специальные пазы внутри нижней части корпуса. Подключите питание и проверьте работоспособность;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/10.jpg)
* Используя саморезы 3,5х25 скрепите между собой верхнюю и нижнюю части корпуса, саморезы устанавливайте через отверстия в дне нижней части корпуса;
![alt text](https://github.com/LarkinDmitry/CatFeeder/blob/main/Photo/11.jpg)
* Повторно проверьте работоспособность. Поздравляю, сборка завершена!
